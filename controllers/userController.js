var moment=require("moment");const User=require("../models/customerSchema"),router=require("../routes/allRoutes"),user_index_get=(e,r)=>{console.log("============="),User.find().then(e=>{r.render("index",{arr:e,moment:moment})}).catch(e=>{console.log(e)})},user_edit_get=(e,r)=>{User.findById(e.params.id).then(e=>{r.render("user/edit",{obj:e,moment:moment})}).catch(e=>{console.log(e)})},user_view_get=(e,r)=>{User.findById(e.params.id).then(e=>{r.render("user/view",{obj:e,moment:moment})}).catch(e=>{console.log(e)})},user_search_post=(e,r)=>{console.log("mkmkmkmkmkmkmkmkmkkkkkkkk");let t=e.body.searchText.trim();User.find({$or:[{firestName:t},{lastName:t}]}).then(e=>{console.log(e),r.render("user/search",{arr:e,moment:moment})}).catch(e=>{console.log(e)})},user_delete=(e,r)=>{User.findByIdAndDelete(e.params.id).then(()=>{r.redirect("/")}).catch(e=>{console.log(e)})},user_put=(e,r)=>{User.findByIdAndUpdate(e.params.id,e.body).then(()=>{r.redirect("/")})},user_add_get=(e,r)=>{r.render("user/add")},user_post=(e,r)=>{User.create(e.body).then(()=>{r.redirect("/")}).catch(e=>{console.log(e)})};module.exports={user_index_get,user_edit_get,user_view_get,user_search_post,user_delete,user_put,user_add_get,user_post};