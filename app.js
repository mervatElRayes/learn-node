const express=require("express"),app=express(),port=process.env.PORT||3e3,mongoose=require("mongoose");app.use(express.urlencoded({extended:!0})),app.set("view engine","ejs"),app.use(express.static("public"));var methodOverride=require("method-override");app.use(methodOverride("_method"));const allRoutes=require("./routes/allRoutes"),addUserRoute=require("./routes/addUser"),path=require("path"),livereload=require("livereload"),liveReloadServer=livereload.createServer();liveReloadServer.watch(path.join(__dirname,"public"));const connectLivereload=require("connect-livereload");app.use(connectLivereload()),liveReloadServer.server.once("connection",()=>{setTimeout(()=>{liveReloadServer.refresh("/")},100)}),mongoose.connect("mongodb+srv://sherifmervat51:7XhbKRY6ZZVO40ho@cluster0.exxvxfa.mongodb.net/all-data?retryWrites=true&w=majority&appName=Cluster0").then(()=>{app.listen(port,()=>{console.log(`http://localhost:${port}/`)})}).catch(e=>{console.log(e)}),app.use(allRoutes),app.use("/user/add.html",addUserRoute);